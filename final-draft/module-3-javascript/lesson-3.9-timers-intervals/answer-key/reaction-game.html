<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reaction Time Game - Answer Key</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            background: #f8f9fa;
            transition: background 0.3s;
        }
        
        body.waiting {
            background: #adb5bd;
        }
        
        body.ready {
            background: #51cf66;
        }
        
        body.too-early {
            background: #ff6b6b;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .game-container {
            background: white;
            padding: 50px;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 800px;
            width: 100%;
        }
        
        h1 {
            color: #495057;
            font-size: 40px;
            margin-bottom: 20px;
        }
        
        #instructions {
            font-size: 24px;
            color: #6c757d;
            margin: 30px 0;
            min-height: 60px;
            font-weight: 500;
        }
        
        #target {
            width: 250px;
            height: 250px;
            background: linear-gradient(135deg, #ffd43b 0%, #fab005 100%);
            border-radius: 50%;
            margin: 40px auto;
            cursor: pointer;
            display: none;
            justify-content: center;
            align-items: center;
            font-size: 48px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            transition: transform 0.2s;
            box-shadow: 0 10px 40px rgba(255, 212, 59, 0.5);
            animation: appear 0.3s;
        }
        
        @keyframes appear {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }
        
        #target:hover {
            transform: scale(1.1);
        }
        
        #target:active {
            transform: scale(0.95);
        }
        
        button {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 24px;
            font-weight: bold;
            transition: all 0.2s;
            box-shadow: 0 6px 20px rgba(79, 172, 254, 0.4);
            margin: 10px;
        }
        
        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.6);
        }
        
        button:active:not(:disabled) {
            transform: translateY(0);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        
        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 25px;
            border-radius: 15px;
            color: white;
        }
        
        .stat-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .stat-value {
            font-size: 36px;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }
        
        .round-indicator {
            font-size: 20px;
            color: #495057;
            margin: 20px 0;
            font-weight: bold;
        }
        
        .rank {
            display: inline-block;
            padding: 10px 25px;
            border-radius: 20px;
            font-size: 24px;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .rank.excellent {
            background: linear-gradient(135deg, #51cf66 0%, #2b8a3e 100%);
            color: white;
        }
        
        .rank.good {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        
        .rank.average {
            background: linear-gradient(135deg, #ffd43b 0%, #fab005 100%);
            color: white;
        }
        
        .rank.slow {
            background: linear-gradient(135deg, #ff6b6b 0%, #c92a2a 100%);
            color: white;
        }
        
        .leaderboard {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            text-align: left;
        }
        
        .leaderboard h3 {
            color: #495057;
            text-align: center;
            margin-bottom: 20px;
            font-size: 28px;
        }
        
        .leaderboard-item {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .rank-number {
            font-size: 24px;
            font-weight: bold;
            color: #495057;
            margin-right: 15px;
        }
        
        .rank-number.first { color: #fab005; }
        .rank-number.second { color: #adb5bd; }
        .rank-number.third { color: #cd7f32; }
        
        .time-value {
            font-size: 24px;
            font-weight: bold;
            color: #4facfe;
            font-family: 'Courier New', monospace;
        }
        
        #result {
            font-size: 28px;
            font-weight: bold;
            margin: 20px 0;
            min-height: 40px;
        }
        
        .countdown {
            font-size: 72px;
            font-weight: bold;
            color: #4facfe;
            margin: 40px 0;
            animation: countPulse 1s;
        }
        
        @keyframes countPulse {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>⚡ Reaction Time Game</h1>
        
        <div class="round-indicator" id="round-indicator">Click Start to Begin!</div>
        
        <p id="instructions">Test your reaction speed! Click the target as soon as it appears.</p>
        
        <button id="start-button">🎮 Start Game</button>
        
        <div id="target">CLICK ME!</div>
        
        <div id="result"></div>
        
        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-label">Last Time</div>
                <div class="stat-value" id="last-time">-</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Best Time</div>
                <div class="stat-value" id="best-time">-</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Average</div>
                <div class="stat-value" id="average-time">-</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Rounds</div>
                <div class="stat-value" id="rounds">0/5</div>
            </div>
        </div>
        
        <div id="rank-display"></div>
        
        <div class="leaderboard">
            <h3>🏆 Top 5 Times</h3>
            <div id="leaderboard-list"></div>
        </div>
    </div>
    
    <script>
        // Game state
        let gameActive = false;
        let waitingForPlayer = false;
        let startTime = 0;
        let timeoutId = null;
        let currentRound = 0;
        const totalRounds = 5;
        let roundTimes = [];
        let allTimes = [];
        
        // DOM elements
        const startButton = document.getElementById('start-button');
        const target = document.getElementById('target');
        const instructions = document.getElementById('instructions');
        const result = document.getElementById('result');
        const roundIndicator = document.getElementById('round-indicator');
        
        // Start the game
        function startGame() {
            console.log('Game started!');
            roundTimes = [];
            currentRound = 0;
            startButton.disabled = true;
            startButton.textContent = '🎮 Game in Progress...';
            result.textContent = '';
            document.getElementById('rank-display').innerHTML = '';
            
            // Countdown before first round
            countdown(3);
        }
        
        // Countdown before round
        function countdown(num) {
            if (num > 0) {
                instructions.innerHTML = '<div class="countdown">' + num + '</div>';
                setTimeout(() => countdown(num - 1), 1000);
            } else {
                instructions.innerHTML = '<div class="countdown">GO!</div>';
                setTimeout(startRound, 500);
            }
        }
        
        // Start a round
        function startRound() {
            currentRound++;
            console.log('Starting round', currentRound);
            
            gameActive = true;
            waitingForPlayer = false;
            result.textContent = '';
            
            roundIndicator.textContent = `Round ${currentRound} of ${totalRounds}`;
            document.getElementById('rounds').textContent = `${currentRound-1}/${totalRounds}`;
            
            // Show waiting screen
            showWaitingScreen();
            
            // Random delay before showing target (1-5 seconds)
            const delay = Math.random() * 4000 + 1000;
            console.log('Target will appear in', Math.round(delay), 'ms');
            
            timeoutId = setTimeout(showTarget, delay);
        }
        
        // Show waiting screen
        function showWaitingScreen() {
            document.body.className = 'waiting';
            instructions.textContent = '⏳ Wait for it...';
            target.style.display = 'none';
            console.log('Waiting...');
        }
        
        // Show target
        function showTarget() {
            console.log('Target shown!');
            waitingForPlayer = true;
            startTime = Date.now();
            
            document.body.className = 'ready';
            instructions.textContent = '👆 CLICK NOW!';
            target.style.display = 'flex';
        }
        
        // Handle click
        function handleClick() {
            if (!gameActive) {
                console.log('Click ignored - game not active');
                return;
            }
            
            if (!waitingForPlayer) {
                // Clicked too early!
                tooEarly();
                return;
            }
            
            // Valid click - calculate reaction time
            const endTime = Date.now();
            const reactionTime = endTime - startTime;
            console.log('Reaction time:', reactionTime, 'ms');
            
            // Record time
            recordTime(reactionTime);
            showResult(reactionTime);
            
            // Hide target
            target.style.display = 'none';
            gameActive = false;
            waitingForPlayer = false;
            
            // Next round or end game
            if (currentRound < totalRounds) {
                setTimeout(() => countdown(3), 2000);
            } else {
                setTimeout(endGame, 2000);
            }
        }
        
        // Too early!
        function tooEarly() {
            console.log('Clicked too early!');
            clearTimeout(timeoutId);
            document.body.className = 'too-early';
            instructions.textContent = '❌ Too early! Wait for the target!';
            result.textContent = '⚠️ That round doesn\'t count!';
            result.style.color = '#ff6b6b';
            
            gameActive = false;
            currentRound--; // Don't count this round
            
            setTimeout(() => {
                document.body.className = '';
                result.textContent = '';
                if (currentRound < totalRounds) {
                    countdown(3);
                } else {
                    endGame();
                }
            }, 2000);
        }
        
        // Record time
        function recordTime(time) {
            roundTimes.push(time);
            allTimes.push(time);
            
            // Sort all times (fastest first)
            allTimes.sort((a, b) => a - b);
            
            // Keep only top 10
            if (allTimes.length > 10) {
                allTimes = allTimes.slice(0, 10);
            }
            
            updateStats();
            updateLeaderboard();
        }
        
        // Show result
        function showResult(time) {
            const rank = getRank(time);
            result.textContent = time + ' ms';
            result.style.color = '#4facfe';
            
            instructions.innerHTML = rank;
        }
        
        // Get rank
        function getRank(time) {
            if (time < 250) return '🏆 Excellent!';
            if (time < 350) return '🥈 Good!';
            if (time < 500) return '🥉 Average';
            return '🐢 Keep practicing!';
        }
        
        // Update stats
        function updateStats() {
            // Last time
            const lastTime = roundTimes[roundTimes.length - 1];
            document.getElementById('last-time').textContent = lastTime + ' ms';
            
            // Best time
            const bestTime = Math.min(...roundTimes);
            document.getElementById('best-time').textContent = bestTime + ' ms';
            
            // Average time
            const sum = roundTimes.reduce((a, b) => a + b, 0);
            const average = Math.round(sum / roundTimes.length);
            document.getElementById('average-time').textContent = average + ' ms';
            
            // Rounds
            document.getElementById('rounds').textContent = `${currentRound}/${totalRounds}`;
            
            console.log('Stats updated:', { lastTime, bestTime, average });
        }
        
        // Update leaderboard
        function updateLeaderboard() {
            const list = document.getElementById('leaderboard-list');
            list.innerHTML = '';
            
            // Show top 5 times
            const topTimes = allTimes.slice(0, 5);
            
            topTimes.forEach((time, index) => {
                const item = document.createElement('div');
                item.className = 'leaderboard-item';
                
                let rankClass = '';
                let medal = '';
                if (index === 0) {
                    rankClass = 'first';
                    medal = '🥇 ';
                } else if (index === 1) {
                    rankClass = 'second';
                    medal = '🥈 ';
                } else if (index === 2) {
                    rankClass = 'third';
                    medal = '🥉 ';
                }
                
                item.innerHTML = `
                    <span class="rank-number ${rankClass}">${medal}#${index + 1}</span>
                    <span class="time-value">${time} ms</span>
                `;
                
                list.appendChild(item);
            });
            
            console.log('Leaderboard updated with top 5:', topTimes);
        }
        
        // End game
        function endGame() {
            console.log('Game ended!');
            document.body.className = '';
            instructions.textContent = '🎉 Game Complete!';
            roundIndicator.textContent = 'Game Over!';
            startButton.disabled = false;
            startButton.textContent = '🔄 Play Again';
            
            // Show final rank
            const sum = roundTimes.reduce((a, b) => a + b, 0);
            const average = Math.round(sum / roundTimes.length);
            const bestTime = Math.min(...roundTimes);
            
            let rankClass = '';
            let rankText = '';
            if (average < 250) {
                rankClass = 'excellent';
                rankText = '🏆 EXCELLENT REFLEXES!';
            } else if (average < 350) {
                rankClass = 'good';
                rankText = '🥈 GOOD JOB!';
            } else if (average < 500) {
                rankClass = 'average';
                rankText = '🥉 NOT BAD!';
            } else {
                rankClass = 'slow';
                rankText = '🐢 KEEP PRACTICING!';
            }
            
            document.getElementById('rank-display').innerHTML = 
                `<div class="rank ${rankClass}">${rankText}</div>
                 <p style="color: #6c757d; font-size: 18px;">
                    Your best time: ${bestTime} ms<br>
                    Average time: ${average} ms
                 </p>`;
            
            console.log('Final stats:', { bestTime, average, rank: rankText });
        }
        
        // Event listeners
        startButton.addEventListener('click', startGame);
        target.addEventListener('click', handleClick);
        
        // Click anywhere during waiting to detect early click
        document.addEventListener('click', function(event) {
            if (gameActive && !waitingForPlayer && event.target !== startButton) {
                handleClick();
            }
        });
        
        // Initialize
        console.log('Reaction Time Game loaded!');
        console.log('Click Start to begin a 5-round game');
        
        // Show example leaderboard
        allTimes = [234, 287, 312, 345, 421];
        updateLeaderboard();
    </script>
</body>
</html>