<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Farm Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8C8 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            text-align: center;
            color: #2c5f2d;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .game-info {
            display: flex;
            justify-content: space-around;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .stat {
            text-align: center;
            padding: 5px 15px;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.9;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            margin-top: 5px;
        }
        
        .season-indicator {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .farm-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .farm-plot {
            aspect-ratio: 1;
            background: #8B4513;
            border: 3px solid #654321;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .farm-plot:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .farm-plot.planted {
            background: #6B8E23;
        }
        
        .farm-plot.ready {
            background: #FFD700;
            animation: glow 1s infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 10px #FFD700; }
            to { box-shadow: 0 0 20px #FFA500; }
        }
        
        .crop-icon {
            font-size: 36px;
            margin-bottom: 5px;
        }
        
        .crop-name {
            font-size: 12px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .growth-timer {
            position: absolute;
            bottom: 5px;
            font-size: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        button {
            flex: 1;
            min-width: 150px;
            padding: 12px 20px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn-plant {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }
        
        .btn-season {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .btn-save {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        
        .shop {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .shop h3 {
            color: #2c5f2d;
            margin-bottom: 15px;
        }
        
        .shop-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }
        
        .shop-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #ddd;
            transition: all 0.3s;
        }
        
        .shop-item:hover {
            border-color: #2c5f2d;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .shop-item h4 {
            color: #2c5f2d;
            margin-bottom: 5px;
        }
        
        .shop-item-info {
            font-size: 12px;
            color: #666;
            margin: 5px 0;
        }
        
        .shop-item button {
            width: 100%;
            margin-top: 10px;
            padding: 8px;
            background: #28a745;
            color: white;
            font-size: 14px;
        }
        
        .shop-item.owned {
            opacity: 0.6;
            border-color: #ccc;
        }
        
        .upgrades {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .upgrades h3 {
            color: #856404;
            margin-bottom: 15px;
        }
        
        .upgrade-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .upgrade-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid #ffc107;
        }
        
        .upgrade-item.maxed {
            opacity: 0.6;
            border-color: #ccc;
        }
        
        .upgrade-info {
            flex: 1;
        }
        
        .upgrade-info h4 {
            color: #856404;
            margin-bottom: 5px;
        }
        
        .upgrade-level {
            font-size: 12px;
            color: #666;
        }
        
        .messages {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 300px;
        }
        
        .message {
            padding: 15px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            animation: slideIn 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .message.success { background: #28a745; }
        .message.error { background: #dc3545; }
        .message.info { background: #17a2b8; }
        
        .stats-panel {
            background: #e7f5ff;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .stats-panel h3 {
            color: #0066cc;
            margin-bottom: 10px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }
        
        .stat-box {
            background: white;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }
        
        .stat-box-label {
            font-size: 12px;
            color: #666;
        }
        
        .stat-box-value {
            font-size: 20px;
            font-weight: bold;
            color: #0066cc;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div id="messages" class="messages"></div>
    
    <div class="container">
        <h1>🌾 Happy Farm Simulator 🌾</h1>
        
        <div class="game-info">
            <div class="stat">
                <div class="stat-label">💰 Money</div>
                <div class="stat-value" id="money">100</div>
            </div>
            <div class="season-indicator">
                <div class="stat-label">Current Season</div>
                <div class="stat-value" id="season">Spring</div>
                <div style="font-size: 12px; margin-top: 5px;">Day <span id="day">1</span>/28</div>
            </div>
            <div class="stat">
                <div class="stat-label">🏆 Total Harvests</div>
                <div class="stat-value" id="harvests">0</div>
            </div>
        </div>
        
        <div class="farm-grid" id="farm-grid"></div>
        
        <div class="controls">
            <button class="btn-plant" onclick="game.showPlantMenu()">🌱 Plant Seeds</button>
            <button class="btn-season" onclick="game.nextDay()">⏰ Next Day</button>
            <button class="btn-save" onclick="game.saveGame()">💾 Save Game</button>
            <button class="btn-save" onclick="game.loadGame()">📂 Load Game</button>
            <button class="btn-season" onclick="game.resetGame()">🔄 New Game</button>
        </div>
        
        <div class="shop">
            <h3>🏪 Seed Shop</h3>
            <div class="shop-items" id="shop-items"></div>
        </div>
        
        <div class="upgrades">
            <h3>⚡ Farm Upgrades</h3>
            <div class="upgrade-list" id="upgrades"></div>
        </div>
        
        <div class="stats-panel">
            <h3>📊 Farm Statistics</h3>
            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-box-label">Crops Planted</div>
                    <div class="stat-box-value" id="stat-planted">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">Total Earnings</div>
                    <div class="stat-box-value" id="stat-earnings">$0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">Days Played</div>
                    <div class="stat-box-value" id="stat-days">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-label">Best Crop</div>
                    <div class="stat-box-value" id="stat-best">None</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // ========================================
        // GAME DATA
        // ========================================
        
        const CROPS = {
            wheat: {
                id: 'wheat',
                name: 'Wheat',
                icon: '🌾',
                seedCost: 10,
                sellPrice: 25,
                growthTime: 3,
                seasons: ['spring', 'summer', 'fall']
            },
            corn: {
                id: 'corn',
                name: 'Corn',
                icon: '🌽',
                seedCost: 20,
                sellPrice: 50,
                growthTime: 5,
                seasons: ['summer', 'fall']
            },
            tomato: {
                id: 'tomato',
                name: 'Tomato',
                icon: '🍅',
                seedCost: 15,
                sellPrice: 40,
                growthTime: 4,
                seasons: ['spring', 'summer']
            },
            pumpkin: {
                id: 'pumpkin',
                name: 'Pumpkin',
                icon: '🎃',
                seedCost: 30,
                sellPrice: 80,
                growthTime: 7,
                seasons: ['fall']
            },
            carrot: {
                id: 'carrot',
                name: 'Carrot',
                icon: '🥕',
                seedCost: 12,
                sellPrice: 30,
                growthTime: 3,
                seasons: ['spring', 'fall', 'winter']
            },
            strawberry: {
                id: 'strawberry',
                name: 'Strawberry',
                icon: '🍓',
                seedCost: 25,
                sellPrice: 60,
                growthTime: 5,
                seasons: ['spring', 'summer']
            }
        };
        
        const SEASONS = ['spring', 'summer', 'fall', 'winter'];
        const SEASON_ICONS = { spring: '🌸', summer: '☀️', fall: '🍂', winter: '❄️' };
        const DAYS_PER_SEASON = 28;
        
        // ========================================
        // GAME OBJECT
        // ========================================
        
        const game = {
            money: 100,
            day: 1,
            season: 0, // 0=spring, 1=summer, 2=fall, 3=winter
            plots: [],
            plotCount: 12,
            
            upgrades: {
                wateringCan: { level: 0, maxLevel: 3, baseCost: 100, effect: 'Growth speed +1 day per level' },
                fertilizer: { level: 0, maxLevel: 3, baseCost: 150, effect: 'Sell price +20% per level' },
                plotExpansion: { level: 0, maxLevel: 2, baseCost: 200, effect: '+4 plots per level' }
            },
            
            stats: {
                cropsPlanted: 0,
                totalEarnings: 0,
                totalDays: 0,
                cropHarvests: {}
            },
            
            init() {
                // Create initial plots
                for (let i = 0; i < this.plotCount; i++) {
                    this.plots.push({ crop: null, daysGrown: 0 });
                }
                
                this.updateUI();
                this.renderFarmGrid();
                this.renderShop();
                this.renderUpgrades();
                
                if (localStorage.getItem('farmingGame')) {
                    this.showMessage('Saved game found! Click Load to continue.', 'info');
                }
            },
            
            updateUI() {
                document.getElementById('money').textContent = this.money;
                document.getElementById('season').textContent = SEASON_ICONS[SEASONS[this.season]] + ' ' + 
                    SEASONS[this.season].charAt(0).toUpperCase() + SEASONS[this.season].slice(1);
                document.getElementById('day').textContent = this.day;
                
                let totalHarvests = 0;
                for (let crop in this.stats.cropHarvests) {
                    totalHarvests += this.stats.cropHarvests[crop];
                }
                document.getElementById('harvests').textContent = totalHarvests;
                
                // Update stats panel
                document.getElementById('stat-planted').textContent = this.stats.cropsPlanted;
                document.getElementById('stat-earnings').textContent = '$' + this.stats.totalEarnings;
                document.getElementById('stat-days').textContent = this.stats.totalDays;
                
                let bestCrop = 'None';
                let maxHarvests = 0;
                for (let crop in this.stats.cropHarvests) {
                    if (this.stats.cropHarvests[crop] > maxHarvests) {
                        maxHarvests = this.stats.cropHarvests[crop];
                        bestCrop = CROPS[crop].name;
                    }
                }
                document.getElementById('stat-best').textContent = bestCrop;
            },
            
            renderFarmGrid() {
                const grid = document.getElementById('farm-grid');
                grid.innerHTML = '';
                
                this.plots.forEach((plot, index) => {
                    const div = document.createElement('div');
                    div.className = 'farm-plot';
                    
                    if (plot.crop) {
                        const crop = CROPS[plot.crop];
                        const growthTimeReduced = Math.max(1, crop.growthTime - this.upgrades.wateringCan.level);
                        const ready = plot.daysGrown >= growthTimeReduced;
                        
                        if (ready) {
                            div.classList.add('ready');
                            div.onclick = () => this.harvestPlot(index);
                        } else {
                            div.classList.add('planted');
                        }
                        
                        div.innerHTML = `
                            <div class="crop-icon">${crop.icon}</div>
                            <div class="crop-name">${crop.name}</div>
                            ${!ready ? `<div class="growth-timer">${plot.daysGrown}/${growthTimeReduced} days</div>` : '<div class="growth-timer">Ready!</div>'}
                        `;
                    } else {
                        div.innerHTML = '<div class="crop-icon">🟫</div><div class="crop-name">Empty</div>';
                        div.onclick = () => this.showPlantMenu(index);
                    }
                    
                    grid.appendChild(div);
                });
            },
            
            renderShop() {
                const container = document.getElementById('shop-items');
                container.innerHTML = '';
                
                const currentSeason = SEASONS[this.season];
                
                for (let id in CROPS) {
                    const crop = CROPS[id];
                    const canPlant = crop.seasons.includes(currentSeason);
                    
                    const div = document.createElement('div');
                    div.className = 'shop-item';
                    if (!canPlant) div.classList.add('owned');
                    
                    div.innerHTML = `
                        <h4>${crop.icon} ${crop.name}</h4>
                        <div class="shop-item-info">Cost: $${crop.seedCost}</div>
                        <div class="shop-item-info">Sells: $${this.getSellPrice(crop)}</div>
                        <div class="shop-item-info">Growth: ${Math.max(1, crop.growthTime - this.upgrades.wateringCan.level)} days</div>
                        <div class="shop-item-info">Seasons: ${crop.seasons.map(s => SEASON_ICONS[s]).join(' ')}</div>
                        ${canPlant ? `<button onclick="game.selectCropToPl('${id}')">Select</button>` : '<button disabled>Wrong Season</button>'}
                    `;
                    
                    container.appendChild(div);
                }
            },
            
            renderUpgrades() {
                const container = document.getElementById('upgrades');
                container.innerHTML = '';
                
                for (let id in this.upgrades) {
                    const upgrade = this.upgrades[id];
                    const maxed = upgrade.level >= upgrade.maxLevel;
                    const cost = this.getUpgradeCost(id);
                    
                    const div = document.createElement('div');
                    div.className = 'upgrade-item';
                    if (maxed) div.classList.add('maxed');
                    
                    let name = id.replace(/([A-Z])/g, ' $1').trim();
                    name = name.charAt(0).toUpperCase() + name.slice(1);
                    
                    div.innerHTML = `
                        <div class="upgrade-info">
                            <h4>${name}</h4>
                            <div class="upgrade-level">Level ${upgrade.level}/${upgrade.maxLevel}</div>
                            <div style="font-size: 12px; color: #666; margin-top: 5px;">${upgrade.effect}</div>
                        </div>
                        ${!maxed ? `<button onclick="game.buyUpgrade('${id}')">Upgrade ($${cost})</button>` : '<button disabled>Maxed</button>'}
                    `;
                    
                    container.appendChild(div);
                }
            },
            
            getSellPrice(crop) {
                const basePrice = crop.sellPrice;
                const bonus = this.upgrades.fertilizer.level * 0.2;
                return Math.floor(basePrice * (1 + bonus));
            },
            
            getUpgradeCost(upgradeId) {
                const upgrade = this.upgrades[upgradeId];
                return Math.floor(upgrade.baseCost * Math.pow(1.5, upgrade.level));
            },
            
            selectCropToPl(cropId) {
                this.selectedCrop = cropId;
                this.showMessage(`Selected ${CROPS[cropId].name}. Click empty plot to plant!`, 'info');
            },
            
            showPlantMenu(plotIndex) {
                if (!this.selectedCrop) {
                    this.showMessage('Select a crop from the shop first!', 'error');
                    return;
                }
                
                this.plantCrop(plotIndex, this.selectedCrop);
            },
            
            plantCrop(plotIndex, cropId) {
                const crop = CROPS[cropId];
                const currentSeason = SEASONS[this.season];
                
                if (!crop.seasons.includes(currentSeason)) {
                    this.showMessage(`Can't plant ${crop.name} in ${currentSeason}!`, 'error');
                    return;
                }
                
                if (this.plots[plotIndex].crop) {
                    this.showMessage('Plot already has a crop!', 'error');
                    return;
                }
                
                if (this.money < crop.seedCost) {
                    this.showMessage('Not enough money!', 'error');
                    return;
                }
                
                this.money -= crop.seedCost;
                this.plots[plotIndex] = { crop: cropId, daysGrown: 0 };
                this.stats.cropsPlanted++;
                this.selectedCrop = null;
                
                this.showMessage(`Planted ${crop.name}!`, 'success');
                this.updateUI();
                this.renderFarmGrid();
            },
            
            harvestPlot(plotIndex) {
                const plot = this.plots[plotIndex];
                if (!plot.crop) return;
                
                const crop = CROPS[plot.crop];
                const growthTimeReduced = Math.max(1, crop.growthTime - this.upgrades.wateringCan.level);
                
                if (plot.daysGrown < growthTimeReduced) {
                    this.showMessage('Not ready yet!', 'error');
                    return;
                }
                
                const earnings = this.getSellPrice(crop);
                this.money += earnings;
                this.stats.totalEarnings += earnings;
                
                if (!this.stats.cropHarvests[crop.id]) {
                    this.stats.cropHarvests[crop.id] = 0;
                }
                this.stats.cropHarvests[crop.id]++;
                
                this.plots[plotIndex] = { crop: null, daysGrown: 0 };
                
                this.showMessage(`Harvested ${crop.name} for $${earnings}!`, 'success');
                this.updateUI();
                this.renderFarmGrid();
            },
            
            nextDay() {
                this.day++;
                this.stats.totalDays++;
                
                // Grow crops
                this.plots.forEach(plot => {
                    if (plot.crop) {
                        plot.daysGrown++;
                    }
                });
                
                // Check season change
                if (this.day > DAYS_PER_SEASON) {
                    this.day = 1;
                    this.season = (this.season + 1) % 4;
                    this.showMessage(`New Season: ${SEASONS[this.season]}!`, 'info');
                    
                    // Clear crops that don't survive the season
                    const newSeason = SEASONS[this.season];
                    this.plots.forEach((plot, index) => {
                        if (plot.crop) {
                            const crop = CROPS[plot.crop];
                            if (!crop.seasons.includes(newSeason)) {
                                this.plots[index] = { crop: null, daysGrown: 0 };
                            }
                        }
                    });
                    
                    this.renderShop();
                }
                
                this.updateUI();
                this.renderFarmGrid();
                this.showMessage('Day passed!', 'info');
            },
            
            buyUpgrade(upgradeId) {
                const upgrade = this.upgrades[upgradeId];
                
                if (upgrade.level >= upgrade.maxLevel) {
                    this.showMessage('Upgrade maxed!', 'error');
                    return;
                }
                
                const cost = this.getUpgradeCost(upgradeId);
                
                if (this.money < cost) {
                    this.showMessage('Not enough money!', 'error');
                    return;
                }
                
                this.money -= cost;
                upgrade.level++;
                
                if (upgradeId === 'plotExpansion') {
                    this.plotCount += 4;
                    for (let i = 0; i < 4; i++) {
                        this.plots.push({ crop: null, daysGrown: 0 });
                    }
                }
                
                let name = upgradeId.replace(/([A-Z])/g, ' $1').trim();
                name = name.charAt(0).toUpperCase() + name.slice(1);
                
                this.showMessage(`Upgraded ${name}!`, 'success');
                this.updateUI();
                this.renderFarmGrid();
                this.renderShop();
                this.renderUpgrades();
            },
            
            showMessage(text, type) {
                const container = document.getElementById('messages');
                const msg = document.createElement('div');
                msg.className = `message ${type}`;
                msg.textContent = text;
                container.appendChild(msg);
                
                setTimeout(() => {
                    msg.style.opacity = '0';
                    msg.style.transform = 'translateX(100%)';
                    setTimeout(() => msg.remove(), 300);
                }, 3000);
            },
            
            saveGame() {
                const data = {
                    money: this.money,
                    day: this.day,
                    season: this.season,
                    plots: this.plots,
                    plotCount: this.plotCount,
                    upgrades: this.upgrades,
                    stats: this.stats
                };
                
                localStorage.setItem('farmingGame', JSON.stringify(data));
                this.showMessage('Game saved!', 'success');
            },
            
            loadGame() {
                const saved = localStorage.getItem('farmingGame');
                if (!saved) {
                    this.showMessage('No saved game!', 'error');
                    return;
                }
                
                const data = JSON.parse(saved);
                this.money = data.money;
                this.day = data.day;
                this.season = data.season;
                this.plots = data.plots;
                this.plotCount = data.plotCount;
                this.upgrades = data.upgrades;
                this.stats = data.stats;
                
                this.updateUI();
                this.renderFarmGrid();
                this.renderShop();
                this.renderUpgrades();
                this.showMessage('Game loaded!', 'success');
            },
            
            resetGame() {
                if (confirm('Start a new game? All progress will be lost!')) {
                    localStorage.removeItem('farmingGame');
                    location.reload();
                }
            }
        };
        
        // Initialize game
        game.init();
    </script>
</body>