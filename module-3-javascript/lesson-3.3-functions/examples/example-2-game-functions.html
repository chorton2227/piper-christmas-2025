<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Example 2: Game Helper Functions</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        h1 {
            color: #f5576c;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        .section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #f5576c;
        }
        .section h2 {
            color: #f5576c;
            margin-top: 0;
        }
        .code-note {
            background: #ffe5e5;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 3px solid #f5576c;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎮 Game Helper Functions</h1>
        <p class="subtitle">Building reusable game logic with functions</p>

        <div class="section">
            <h2>Combat System Functions</h2>
            <p>Calculate damage, healing, and battle results.</p>
        </div>

        <div class="section">
            <h2>Level & Experience Functions</h2>
            <p>Manage player progression and leveling up.</p>
        </div>

        <div class="section">
            <h2>Status Check Functions</h2>
            <p>Check game conditions and player status.</p>
        </div>

        <div class="section">
            <h2>Complete Battle Simulation</h2>
            <p>All functions working together in a real battle!</p>
        </div>

        <p style="text-align: center; color: #666; margin-top: 30px;">
            <strong>Open the console (F12) to see the battle!</strong>
        </p>
    </div>

    <script>
        console.log('='.repeat(60));
        console.log('🎮 GAME HELPER FUNCTIONS DEMONSTRATION');
        console.log('='.repeat(60));

        // ============================================
        // PART 1: COMBAT SYSTEM FUNCTIONS
        // ============================================
        
        console.log('\n' + '='.repeat(60));
        console.log('PART 1: COMBAT SYSTEM FUNCTIONS');
        console.log('='.repeat(60));

        // Calculate damage dealt in combat
        function calculateDamage(attackPower, defense) {
            let damage = attackPower - defense;
            if (damage < 0) {
                damage = 0;  // Can't do negative damage
            }
            return damage;
        }

        console.log('\n⚔️  Testing damage calculation:');
        console.log('Attack: 50, Defense: 20 → Damage:', calculateDamage(50, 20));
        console.log('Attack: 30, Defense: 10 → Damage:', calculateDamage(30, 10));
        console.log('Attack: 15, Defense: 20 → Damage:', calculateDamage(15, 20));

        // Calculate critical hit (double damage)
        function calculateCriticalHit(normalDamage) {
            return normalDamage * 2;
        }

        console.log('\n💥 Testing critical hits:');
        let baseDamage = calculateDamage(40, 15);
        console.log('Normal damage:', baseDamage);
        console.log('Critical damage:', calculateCriticalHit(baseDamage));

        // Heal a character
        function healCharacter(currentHealth, healAmount, maxHealth) {
            let newHealth = currentHealth + healAmount;
            if (newHealth > maxHealth) {
                newHealth = maxHealth;  // Can't exceed max health
            }
            return newHealth;
        }

        console.log('\n❤️  Testing healing:');
        console.log('Current: 50, Heal: 30, Max: 100 → New Health:', 
                    healCharacter(50, 30, 100));
        console.log('Current: 80, Heal: 40, Max: 100 → New Health:', 
                    healCharacter(80, 40, 100));
        console.log('Current: 95, Heal: 20, Max: 100 → New Health:', 
                    healCharacter(95, 20, 100));

        // Calculate mana cost for spell
        function calculateManaCost(spellPower) {
            return Math.floor(spellPower / 2);
        }

        console.log('\n🔮 Testing mana costs:');
        console.log('Spell power: 30 → Mana cost:', calculateManaCost(30));
        console.log('Spell power: 50 → Mana cost:', calculateManaCost(50));
        console.log('Spell power: 75 → Mana cost:', calculateManaCost(75));

        // Check if character can cast spell
        function canCastSpell(currentMana, spellPower) {
            let manaCost = calculateManaCost(spellPower);
            return currentMana >= manaCost;
        }

        console.log('\n✨ Can cast spell?');
        console.log('Mana: 50, Spell: 60 →', canCastSpell(50, 60));
        console.log('Mana: 50, Spell: 40 →', canCastSpell(50, 40));
        console.log('Mana: 30, Spell: 60 →', canCastSpell(30, 60));

        // ============================================
        // PART 2: LEVEL & EXPERIENCE FUNCTIONS
        // ============================================

        console.log('\n' + '='.repeat(60));
        console.log('PART 2: LEVEL & EXPERIENCE FUNCTIONS');
        console.log('='.repeat(60));

        // Calculate experience needed for next level
        function getExperienceForLevel(level) {
            return level * 100;
        }

        console.log('\n📊 Experience requirements:');
        console.log('Level 1 needs:', getExperienceForLevel(1), 'XP');
        console.log('Level 2 needs:', getExperienceForLevel(2), 'XP');
        console.log('Level 5 needs:', getExperienceForLevel(5), 'XP');
        console.log('Level 10 needs:', getExperienceForLevel(10), 'XP');

        // Check if player should level up
        function shouldLevelUp(currentXP, currentLevel) {
            let requiredXP = getExperienceForLevel(currentLevel + 1);
            return currentXP >= requiredXP;
        }

        console.log('\n⬆️  Should level up?');
        console.log('XP: 150, Level: 1 →', shouldLevelUp(150, 1));
        console.log('XP: 250, Level: 2 →', shouldLevelUp(250, 2));
        console.log('XP: 150, Level: 2 →', shouldLevelUp(150, 2));

        // Calculate stat increase on level up
        function calculateStatIncrease(baseStat, level) {
            return baseStat + (level * 5);
        }

        console.log('\n💪 Stat increases by level:');
        console.log('Base: 50, Level: 1 →', calculateStatIncrease(50, 1));
        console.log('Base: 50, Level: 5 →', calculateStatIncrease(50, 5));
        console.log('Base: 50, Level: 10 →', calculateStatIncrease(50, 10));

        // Get rank title based on level
        function getRankTitle(level) {
            if (level >= 10) return 'Master';
            if (level >= 7) return 'Expert';
            if (level >= 5) return 'Warrior';
            if (level >= 3) return 'Apprentice';
            if (level >= 2) return 'Novice';
            return 'Beginner';
        }

        console.log('\n🏆 Rank titles:');
        console.log('Level 1 →', getRankTitle(1));
        console.log('Level 3 →', getRankTitle(3));
        console.log('Level 5 →', getRankTitle(5));
        console.log('Level 7 →', getRankTitle(7));
        console.log('Level 10 →', getRankTitle(10));

        // ============================================
        // PART 3: STATUS CHECK FUNCTIONS
        // ============================================

        console.log('\n' + '='.repeat(60));
        console.log('PART 3: STATUS CHECK FUNCTIONS');
        console.log('='.repeat(60));

        // Check if character is alive
        function isAlive(health) {
            return health > 0;
        }

        console.log('\n❤️  Is character alive?');
        console.log('Health: 50 →', isAlive(50));
        console.log('Health: 0 →', isAlive(0));
        console.log('Health: -10 →', isAlive(-10));

        // Check if health is critical (below 25%)
        function isCriticalHealth(currentHealth, maxHealth) {
            let percentage = (currentHealth / maxHealth) * 100;
            return percentage < 25;
        }

        console.log('\n⚠️  Is health critical?');
        console.log('Health: 20/100 →', isCriticalHealth(20, 100));
        console.log('Health: 50/100 →', isCriticalHealth(50, 100));
        console.log('Health: 10/100 →', isCriticalHealth(10, 100));

        // Check if character has enough money
        function canAfford(itemCost, currentGold) {
            return currentGold >= itemCost;
        }

        console.log('\n💰 Can afford item?');
        console.log('Item: 50g, Gold: 100g →', canAfford(50, 100));
        console.log('Item: 150g, Gold: 100g →', canAfford(150, 100));
        console.log('Item: 100g, Gold: 100g →', canAfford(100, 100));

        // Get health percentage
        function getHealthPercentage(currentHealth, maxHealth) {
            return Math.floor((currentHealth / maxHealth) * 100);
        }

        console.log('\n📊 Health percentages:');
        console.log('50/100 HP →', getHealthPercentage(50, 100) + '%');
        console.log('75/100 HP →', getHealthPercentage(75, 100) + '%');
        console.log('33/100 HP →', getHealthPercentage(33, 100) + '%');

        // Get health status message
        function getHealthStatus(currentHealth, maxHealth) {
            let percentage = getHealthPercentage(currentHealth, maxHealth);
            
            if (percentage === 0) return '💀 Defeated';
            if (percentage < 25) return '🔴 Critical';
            if (percentage < 50) return '🟡 Low';
            if (percentage < 75) return '🟢 Good';
            return '💚 Excellent';
        }

        console.log('\n🏥 Health status messages:');
        console.log('100/100 HP →', getHealthStatus(100, 100));
        console.log('70/100 HP →', getHealthStatus(70, 100));
        console.log('40/100 HP →', getHealthStatus(40, 100));
        console.log('20/100 HP →', getHealthStatus(20, 100));
        console.log('0/100 HP →', getHealthStatus(0, 100));

        // ============================================
        // PART 4: COMPLETE BATTLE SIMULATION
        // ============================================

        console.log('\n' + '='.repeat(60));
        console.log('PART 4: COMPLETE BATTLE SIMULATION');
        console.log('='.repeat(60));

        // Display function for character
        function displayCharacter(name, health, maxHealth, mana, maxMana, level) {
            console.log('\n╔════════════════════════════╗');
            console.log('║  ' + name.padEnd(24) + '  ║');
            console.log('╠════════════════════════════╣');
            console.log('║ Level: ' + level);
            console.log('║ HP: ' + health + '/' + maxHealth + ' (' + getHealthPercentage(health, maxHealth) + '%)');
            console.log('║ MP: ' + mana + '/' + maxMana);
            console.log('║ Status: ' + getHealthStatus(health, maxHealth));
            console.log('╚════════════════════════════╝');
        }

        // Battle action display
        function displayAction(actor, action, target, result) {
            console.log('\n⚔️  ' + actor + ' ' + action + ' ' + target + '!');
            console.log('   Result: ' + result);
        }

        // === BATTLE STARTS ===
        
        console.log('\n🎮 BATTLE BEGINS!');
        console.log('='.repeat(60));

        // Initialize hero
        let heroName = 'Thunder Knight';
        let heroLevel = 5;
        let heroMaxHealth = 100;
        let heroHealth = 100;
        let heroMaxMana = 50;
        let heroMana = 50;
        let heroAttack = 30;
        let heroDefense = 15;

        // Initialize enemy
        let enemyName = 'Shadow Beast';
        let enemyLevel = 4;
        let enemyMaxHealth = 80;
        let enemyHealth = 80;
        let enemyMaxMana = 30;
        let enemyMana = 30;
        let enemyAttack = 25;
        let enemyDefense = 10;

        // Show starting stats
        console.log('\n📋 COMBATANTS:');
        displayCharacter(heroName, heroHealth, heroMaxHealth, heroMana, heroMaxMana, heroLevel);
        displayCharacter(enemyName, enemyHealth, enemyMaxHealth, enemyMana, enemyMaxMana, enemyLevel);

        console.log('\n' + '─'.repeat(60));
        console.log('ROUND 1');
        console.log('─'.repeat(60));

        // Hero attacks
        let damage1 = calculateDamage(heroAttack, enemyDefense);
        enemyHealth = enemyHealth - damage1;
        displayAction(heroName, 'attacks', enemyName, damage1 + ' damage!');

        // Enemy counterattacks
        let damage2 = calculateDamage(enemyAttack, heroDefense);
        heroHealth = heroHealth - damage2;
        displayAction(enemyName, 'attacks', heroName, damage2 + ' damage!');

        // Show current status
        console.log('\n📊 Status after Round 1:');
        console.log(heroName + ': ' + heroHealth + '/' + heroMaxHealth + ' HP', 
                    getHealthStatus(heroHealth, heroMaxHealth));
        console.log(enemyName + ': ' + enemyHealth + '/' + enemyMaxHealth + ' HP',
                    getHealthStatus(enemyHealth, enemyMaxHealth));

        console.log('\n' + '─'.repeat(60));
        console.log('ROUND 2');
        console.log('─'.repeat(60));

        // Hero uses special attack (costs mana)
        let spellPower = 40;
        let manaCost = calculateManaCost(spellPower);

        if (canCastSpell(heroMana, spellPower)) {
            heroMana = heroMana - manaCost;
            let spellDamage = calculateDamage(spellPower, enemyDefense);
            enemyHealth = enemyHealth - spellDamage;
            displayAction(heroName, 'casts Lightning Strike on', enemyName, 
                         spellDamage + ' damage! (' + manaCost + ' mana used)');
        }

        // Enemy attacks
        let damage3 = calculateDamage(enemyAttack, heroDefense);
        heroHealth = heroHealth - damage3;
        displayAction(enemyName, 'attacks', heroName, damage3 + ' damage!');

        // Show current status
        console.log('\n📊 Status after Round 2:');
        console.log(heroName + ': ' + heroHealth + '/' + heroMaxHealth + ' HP, ' +
                    heroMana + '/' + heroMaxMana + ' MP', 
                    getHealthStatus(heroHealth, heroMaxHealth));
        console.log(enemyName + ': ' + enemyHealth + '/' + enemyMaxHealth + ' HP',
                    getHealthStatus(enemyHealth, enemyMaxHealth));

        console.log('\n' + '─'.repeat(60));
        console.log('ROUND 3');
        console.log('─'.repeat(60));

        // Hero uses healing potion
        let healAmount = 30;
        let oldHealth = heroHealth;
        heroHealth = healCharacter(heroHealth, healAmount, heroMaxHealth);
        let actualHeal = heroHealth - oldHealth;
        console.log('\n💚 ' + heroName + ' uses Health Potion!');
        console.log('   Healed: ' + actualHeal + ' HP');

        // Hero attacks
        let damage4 = calculateDamage(heroAttack, enemyDefense);
        enemyHealth = enemyHealth - damage4;
        displayAction(heroName, 'attacks', enemyName, damage4 + ' damage!');

        // Check if enemy is defeated
        if (!isAlive(enemyHealth)) {
            console.log('\n' + '='.repeat(60));
            console.log('💀 ' + enemyName + ' has been defeated!');
            console.log('🏆 ' + heroName + ' is victorious!');
            console.log('='.repeat(60));
            
            // Award experience
            let xpGained = 150;
            let goldGained = 50;
            console.log('\n🎁 Rewards:');
            console.log('   + ' + xpGained + ' XP');
            console.log('   + ' + goldGained + ' Gold');
            
            // Check for level up
            let currentXP = 180;
            if (shouldLevelUp(currentXP + xpGained, heroLevel)) {
                console.log('\n⭐ LEVEL UP! ⭐');
                heroLevel = heroLevel + 1;
                console.log(heroName + ' is now level ' + heroLevel + '!');
                console.log('New title: ' + getRankTitle(heroLevel));
            }
        }

        // Final status
        console.log('\n📊 FINAL STATUS:');
        displayCharacter(heroName, heroHealth, heroMaxHealth, heroMana, heroMaxMana, heroLevel);

        console.log('\n' + '='.repeat(60));
        console.log('✅ SIMULATION COMPLETE!');
        console.log('='.repeat(60));
        console.log('Functions used in this battle:');
        console.log('✓ calculateDamage()');
        console.log('✓ healCharacter()');
        console.log('✓ calculateManaCost()');
        console.log('✓ canCastSpell()');
        console.log('✓ isAlive()');
        console.log('✓ getHealthPercentage()');
        console.log('✓ getHealthStatus()');
        console.log('✓ shouldLevelUp()');
        console.log('✓ getRankTitle()');
        console.log('✓ displayCharacter()');
        console.log('✓ displayAction()');
        console.log('='.repeat(60));
    </script>
</body>
</html>