<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Example 4.13.1 – Basic Tutorial</title>
<style>
 body { font-family: system-ui, sans-serif; margin:0; padding:2rem; }
 button { cursor:pointer; }
 #tutorialOverlay[hidden] { display:none; }
 #tutorialOverlay { position:fixed; inset:0; background:rgba(0,0,0,0.55); display:flex; align-items:center; justify-content:center; }
 .dialog { background:#fff; color:#222; width:480px; max-width:90%; border-radius:12px; padding:1.2rem 1.4rem; box-shadow:0 8px 28px -6px rgba(0,0,0,.5); }
 .dialog h2 { margin-top:0; }
 .close-btn { position:absolute; top:.6rem; right:.6rem; }
 .fade-in { animation: fade .25s ease-out; }
 @media (prefers-reduced-motion: reduce){ .fade-in { animation:none; } }
 @keyframes fade { from { opacity:0; transform:translateY(6px);} to { opacity:1; transform:translateY(0);} }
</style>
</head>
<body>
<button id="helpBtn">Help / Tutorial</button>
<p>Game UI placeholder...</p>
<div id="tutorialOverlay" hidden>
  <div class="dialog fade-in" role="dialog" aria-modal="true" aria-labelledby="tutTitle" aria-describedby="tutDesc">
    <button class="close-btn" id="closeTut" aria-label="Close Tutorial">✕</button>
    <h2 id="tutTitle">How to Play</h2>
    <p id="tutDesc">Learn the basic phases and actions of the poker game.</p>
    <p><strong>Phases:</strong> Pre-Flop → Flop → Turn → River → Showdown</p>
    <p><strong>Actions:</strong> Check, Call, Bet/Raise, Fold, All-In</p>
    <button id="finishTut">Got it!</button>
  </div>
</div>
<script>
const overlay = document.getElementById('tutorialOverlay');
const helpBtn = document.getElementById('helpBtn');
const closeBtn = document.getElementById('closeTut');
const finishBtn = document.getElementById('finishTut');
let lastFocus = null;
function openTutorial(){
  lastFocus = document.activeElement;
  overlay.hidden = false;
  document.getElementById('tutTitle').focus();
  trapFocus(overlay.querySelector('.dialog'));
}
function closeTutorial(){
  overlay.hidden = true;
  if(lastFocus) lastFocus.focus();
}
helpBtn.addEventListener('click', openTutorial);
closeBtn.addEventListener('click', closeTutorial);
finishBtn.addEventListener('click', closeTutorial);
window.addEventListener('keydown', e=>{ if(!overlay.hidden && e.key==='Escape') closeTutorial(); });
function trapFocus(container){
  const selector='a,button,input,select,textarea,[tabindex]:not([tabindex="-1"])';
  let focusEls = Array.from(container.querySelectorAll(selector));
  let first=focusEls[0]; let last=focusEls[focusEls.length-1];
  container.addEventListener('keydown', e=>{
    if(e.key==='Tab'){
      if(e.shiftKey && document.activeElement===first){ e.preventDefault(); last.focus(); }
      else if(!e.shiftKey && document.activeElement===last){ e.preventDefault(); first.focus(); }
    }
  });
}
</script>
</body>
</html>