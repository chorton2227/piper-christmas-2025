<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Example 1: Hand Evaluation - Showdown & Winner</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background-color: #2c5530;
            color: white;
        }
        .container {
            background: white;
            color: #333;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        h1 { color: #2c5530; margin-top: 0; }
        h2 { color: #4CAF50; }
        .card-display {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .card {
            background: white;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 10px 15px;
            font-size: 24px;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .card.hearts, .card.diamonds { color: #d32f2f; }
        .card.clubs, .card.spades { color: #000; }
        .card.best-hand {
            border-color: #FFD700;
            border-width: 3px;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #45a049; }
        .output {
            margin-top: 20px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 5px;
            border-left: 4px solid #4CAF50;
        }
        .hand-result {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 5px solid #4CAF50;
        }
        .hand-rank {
            font-size: 24px;
            font-weight: bold;
            color: #2c5530;
            margin: 10px 0;
        }
        .ranking-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .ranking-table th, .ranking-table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        .ranking-table th {
            background: #4CAF50;
            color: white;
        }
        .debug {
            font-family: monospace;
            background: #1e1e1e;
            color: #4ec9b0;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Example 1: Hand Evaluation</h1>
        <p>This example demonstrates evaluating poker hands from 7 cards (2 hole + 5 community) and determining the best 5-card hand with rankings.</p>
        
        <h2>Hand Ranking System</h2>
        <table class="ranking-table">
            <tr>
                <th>Rank</th>
                <th>Hand Type</th>
                <th>Description</th>
            </tr>
            <tr><td>9</td><td>Royal Flush</td><td>A‚ô• K‚ô• Q‚ô• J‚ô• 10‚ô•</td></tr>
            <tr><td>8</td><td>Straight Flush</td><td>9‚ô† 8‚ô† 7‚ô† 6‚ô† 5‚ô†</td></tr>
            <tr><td>7</td><td>Four of a Kind</td><td>K‚ô• K‚ô† K‚ô¶ K‚ô£ 5‚ô•</td></tr>
            <tr><td>6</td><td>Full House</td><td>Q‚ô• Q‚ô† Q‚ô¶ 8‚ô£ 8‚ô•</td></tr>
            <tr><td>5</td><td>Flush</td><td>J‚ô• 9‚ô• 7‚ô• 5‚ô• 3‚ô•</td></tr>
            <tr><td>4</td><td>Straight</td><td>10‚ô† 9‚ô• 8‚ô¶ 7‚ô£ 6‚ô†</td></tr>
            <tr><td>3</td><td>Three of a Kind</td><td>7‚ô• 7‚ô† 7‚ô¶ A‚ô£ K‚ô•</td></tr>
            <tr><td>2</td><td>Two Pair</td><td>J‚ô• J‚ô† 5‚ô¶ 5‚ô£ A‚ô•</td></tr>
            <tr><td>1</td><td>Pair</td><td>9‚ô• 9‚ô† A‚ô¶ K‚ô£ Q‚ô•</td></tr>
            <tr><td>0</td><td>High Card</td><td>A‚ô• K‚ô† Q‚ô¶ J‚ô£ 9‚ô•</td></tr>
        </table>
        
        <button onclick="testCase1()">Test Case 1: Flush</button>
        <button onclick="testCase2()">Test Case 2: Full House</button>
        <button onclick="testCase3()">Test Case 3: Straight</button>
        
        <div id="output" class="output">
            <h3>Click a test case to see hand evaluation...</h3>
        </div>
        
        <div id="debug" class="debug"></div>
    </div>

    <script>
        /*
         * HAND EVALUATION SYSTEM
         * Evaluates poker hands and finds best 5-card combination from 7 cards
         */
        
        function getSuitSymbol(suit) {
            const symbols = { hearts: "‚ô•", diamonds: "‚ô¶", clubs: "‚ô£", spades: "‚ô†" };
            return symbols[suit] || suit;
        }

        function createCard(rank, suit, value) {
            return { rank, suit, value };
        }

        // Evaluate a poker hand from 7 cards
        function evaluateHand(holeCards, communityCards) {
            console.log("\n=== EVALUATING HAND ===");
            console.log("Hole cards: " + formatCards(holeCards));
            console.log("Community cards: " + formatCards(communityCards));
            
            const allCards = [...holeCards, ...communityCards];
            const sortedCards = [...allCards].sort((a, b) => b.value - a.value);
            
            console.log("All 7 cards: " + formatCards(sortedCards));
            
            // Check for Royal Flush (special case of straight flush)
            const royalFlush = checkRoyalFlush(sortedCards);
            if (royalFlush) {
                console.log("‚úì Found Royal Flush!");
                return { rank: 9, name: "Royal Flush", cards: royalFlush };
            }
            
            // Check for Straight Flush
            const straightFlush = checkStraightFlush(sortedCards);
            if (straightFlush) {
                console.log("‚úì Found Straight Flush!");
                return { rank: 8, name: "Straight Flush", cards: straightFlush };
            }
            
            // Check for Four of a Kind
            const fourOfKind = checkFourOfKind(sortedCards);
            if (fourOfKind) {
                console.log("‚úì Found Four of a Kind!");
                return { rank: 7, name: "Four of a Kind", cards: fourOfKind };
            }
            
            // Check for Full House
            const fullHouse = checkFullHouse(sortedCards);
            if (fullHouse) {
                console.log("‚úì Found Full House!");
                return { rank: 6, name: "Full House", cards: fullHouse };
            }
            
            // Check for Flush
            const flush = checkFlush(sortedCards);
            if (flush) {
                console.log("‚úì Found Flush!");
                return { rank: 5, name: "Flush", cards: flush };
            }
            
            // Check for Straight
            const straight = checkStraight(sortedCards);
            if (straight) {
                console.log("‚úì Found Straight!");
                return { rank: 4, name: "Straight", cards: straight };
            }
            
            // Check for Three of a Kind
            const threeOfKind = checkThreeOfKind(sortedCards);
            if (threeOfKind) {
                console.log("‚úì Found Three of a Kind!");
                return { rank: 3, name: "Three of a Kind", cards: threeOfKind };
            }
            
            // Check for Two Pair
            const twoPair = checkTwoPair(sortedCards);
            if (twoPair) {
                console.log("‚úì Found Two Pair!");
                return { rank: 2, name: "Two Pair", cards: twoPair };
            }
            
            // Check for Pair
            const pair = checkPair(sortedCards);
            if (pair) {
                console.log("‚úì Found Pair!");
                return { rank: 1, name: "Pair", cards: pair };
            }
            
            // High Card
            console.log("‚úì High Card hand");
            return { rank: 0, name: "High Card", cards: sortedCards.slice(0, 5) };
        }

        function checkRoyalFlush(cards) {
            const suits = groupBySuit(cards);
            for (const suit in suits) {
                if (suits[suit].length >= 5) {
                    const suitCards = suits[suit].sort((a, b) => b.value - a.value);
                    // Royal flush: A, K, Q, J, 10 of same suit
                    if (suitCards[0].value === 14 && suitCards[1].value === 13 && 
                        suitCards[2].value === 12 && suitCards[3].value === 11 && 
                        suitCards[4].value === 10) {
                        return suitCards.slice(0, 5);
                    }
                }
            }
            return null;
        }

        function checkStraightFlush(cards) {
            const suits = groupBySuit(cards);
            for (const suit in suits) {
                if (suits[suit].length >= 5) {
                    const straight = checkStraight(suits[suit]);
                    if (straight) return straight;
                }
            }
            return null;
        }

        function checkFourOfKind(cards) {
            const groups = groupByValue(cards);
            for (const value in groups) {
                if (groups[value].length === 4) {
                    const kicker = cards.find(c => c.value !== parseInt(value));
                    return [...groups[value], kicker];
                }
            }
            return null;
        }

        function checkFullHouse(cards) {
            const groups = groupByValue(cards);
            let triple = null;
            let pair = null;
            
            // Find highest triple
            for (const value in groups) {
                if (groups[value].length === 3) {
                    if (!triple || parseInt(value) > triple[0].value) {
                        triple = groups[value];
                    }
                }
            }
            
            // Find highest pair (different from triple)
            if (triple) {
                for (const value in groups) {
                    if (groups[value].length >= 2 && parseInt(value) !== triple[0].value) {
                        if (!pair || parseInt(value) > pair[0].value) {
                            pair = groups[value].slice(0, 2);
                        }
                    }
                }
            }
            
            return (triple && pair) ? [...triple, ...pair] : null;
        }

        function checkFlush(cards) {
            const suits = groupBySuit(cards);
            for (const suit in suits) {
                if (suits[suit].length >= 5) {
                    return suits[suit].slice(0, 5);
                }
            }
            return null;
        }

        function checkStraight(cards) {
            const uniqueValues = [...new Set(cards.map(c => c.value))].sort((a, b) => b - a);
            
            // Check for regular straight
            for (let i = 0; i <= uniqueValues.length - 5; i++) {
                if (uniqueValues[i] - uniqueValues[i + 4] === 4) {
                    // Found straight, get first card of each value
                    return uniqueValues.slice(i, i + 5).map(v => 
                        cards.find(c => c.value === v)
                    );
                }
            }
            
            // Check for Ace-low straight (A-2-3-4-5)
            if (uniqueValues.includes(14) && uniqueValues.includes(5) && 
                uniqueValues.includes(4) && uniqueValues.includes(3) && 
                uniqueValues.includes(2)) {
                return [5, 4, 3, 2, 14].map(v => cards.find(c => c.value === v));
            }
            
            return null;
        }

        function checkThreeOfKind(cards) {
            const groups = groupByValue(cards);
            for (const value in groups) {
                if (groups[value].length === 3) {
                    const kickers = cards.filter(c => c.value !== parseInt(value))
                        .slice(0, 2);
                    return [...groups[value], ...kickers];
                }
            }
            return null;
        }

        function checkTwoPair(cards) {
            const groups = groupByValue(cards);
            const pairs = [];
            
            for (const value in groups) {
                if (groups[value].length >= 2) {
                    pairs.push({ value: parseInt(value), cards: groups[value].slice(0, 2) });
                }
            }
            
            if (pairs.length >= 2) {
                pairs.sort((a, b) => b.value - a.value);
                const kicker = cards.find(c => c.value !== pairs[0].value && c.value !== pairs[1].value);
                return [...pairs[0].cards, ...pairs[1].cards, kicker];
            }
            
            return null;
        }

        function checkPair(cards) {
            const groups = groupByValue(cards);
            for (const value in groups) {
                if (groups[value].length === 2) {
                    const kickers = cards.filter(c => c.value !== parseInt(value))
                        .slice(0, 3);
                    return [...groups[value], ...kickers];
                }
            }
            return null;
        }

        function groupBySuit(cards) {
            const groups = {};
            cards.forEach(card => {
                if (!groups[card.suit]) groups[card.suit] = [];
                groups[card.suit].push(card);
            });
            // Sort each group by value descending
            for (const suit in groups) {
                groups[suit].sort((a, b) => b.value - a.value);
            }
            return groups;
        }

        function groupByValue(cards) {
            const groups = {};
            cards.forEach(card => {
                if (!groups[card.value]) groups[card.value] = [];
                groups[card.value].push(card);
            });
            return groups;
        }

        function formatCards(cards) {
            return cards.map(c => c.rank + getSuitSymbol(c.suit)).join(" ");
        }

        function displayHandResult(holeCards, communityCards, result) {
            const output = document.getElementById("output");
            
            let html = '<h3>Hand Evaluation Result</h3>';
            
            html += '<div><strong>Your Hole Cards:</strong></div>';
            html += '<div class="card-display">';
            holeCards.forEach(card => {
                html += `<div class="card ${card.suit}">${card.rank}${getSuitSymbol(card.suit)}</div>`;
            });
            html += '</div>';
            
            html += '<div style="margin-top: 20px;"><strong>Community Cards:</strong></div>';
            html += '<div class="card-display">';
            communityCards.forEach(card => {
                html += `<div class="card ${card.suit}">${card.rank}${getSuitSymbol(card.suit)}</div>`;
            });
            html += '</div>';
            
            html += '<div class="hand-result">';
            html += `<div class="hand-rank">üèÜ ${result.name}</div>`;
            html += `<div><strong>Rank Level:</strong> ${result.rank} / 9</div>`;
            html += '<div style="margin-top: 15px;"><strong>Best 5-Card Hand:</strong></div>';
            html += '<div class="card-display">';
            result.cards.forEach(card => {
                html += `<div class="card ${card.suit} best-hand">${card.rank}${getSuitSymbol(card.suit)}</div>`;
            });
            html += '</div>';
            html += '</div>';
            
            output.innerHTML = html;
        }

        // Test Cases
        function testCase1() {
            console.log('\n' + '='.repeat(60));
            console.log('TEST CASE 1: Flush (5 Hearts)');
            console.log('='.repeat(60));
            
            const holeCards = [
                createCard('A', 'hearts', 14),
                createCard('K', 'hearts', 13)
            ];
            
            const communityCards = [
                createCard('9', 'hearts', 9),
                createCard('7', 'hearts', 7),
                createCard('3', 'hearts', 3),
                createCard('J', 'clubs', 11),
                createCard('5', 'spades', 5)
            ];
            
            const result = evaluateHand(holeCards, communityCards);
            displayHandResult(holeCards, communityCards, result);
            
            console.log('\nResult: ' + result.name);
            console.log('Best hand: ' + formatCards(result.cards));
            console.log('Rank: ' + result.rank + ' / 9');
        }

        function testCase2() {
            console.log('\n' + '='.repeat(60));
            console.log('TEST CASE 2: Full House (Queens over Tens)');
            console.log('='.repeat(60));
            
            const holeCards = [
                createCard('Q', 'hearts', 12),
                createCard('Q', 'diamonds', 12)
            ];
            
            const communityCards = [
                createCard('Q', 'spades', 12),
                createCard('10', 'hearts', 10),
                createCard('10', 'clubs', 10),
                createCard('5', 'diamonds', 5),
                createCard('2', 'spades', 2)
            ];
            
            const result = evaluateHand(holeCards, communityCards);
            displayHandResult(holeCards, communityCards, result);
            
            console.log('\nResult: ' + result.name);
            console.log('Best hand: ' + formatCards(result.cards));
            console.log('Rank: ' + result.rank + ' / 9');
        }

        function testCase3() {
            console.log('\n' + '='.repeat(60));
            console.log('TEST CASE 3: Straight (9-high)');
            console.log('='.repeat(60));
            
            const holeCards = [
                createCard('9', 'hearts', 9),
                createCard('8', 'diamonds', 8)
            ];
            
            const communityCards = [
                createCard('7', 'spades', 7),
                createCard('6', 'clubs', 6),
                createCard('5', 'hearts', 5),
                createCard('K', 'diamonds', 13),
                createCard('2', 'spades', 2)
            ];
            
            const result = evaluateHand(holeCards, communityCards);
            displayHandResult(holeCards, communityCards, result);
            
            console.log('\nResult: ' + result.name);
            console.log('Best hand: ' + formatCards(result.cards));
            console.log('Rank: ' + result.rank + ' / 9');
        }

        // Capture console output to debug div
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            const debugDiv = document.getElementById('debug');
            debugDiv.textContent += args.join(' ') + '\n';
        };
        
        // Initialize
        console.log('Example 1: Hand Evaluation loaded and ready!');
        console.log('This demonstrates poker hand evaluation from 7 cards.');
    </script>
</body>
</html>
