<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Battle Arena</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Arial', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; color: white; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 20px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); font-size: 42px; }
        .game-stats { display: flex; justify-content: space-around; background: rgba(255,255,255,0.1); border-radius: 10px; padding: 20px; margin-bottom: 20px; backdrop-filter: blur(10px); }
        .stat { text-align: center; }
        .stat-label { font-size: 14px; opacity: 0.8; }
        .stat-value { font-size: 28px; font-weight: bold; margin-top: 5px; }
        .battle-area { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .player-area, .enemy-area { background: rgba(0,0,0,0.3); border-radius: 15px; padding: 20px; backdrop-filter: blur(10px); }
        h2 { margin-bottom: 15px; text-align: center; }
        .health-bar { width: 100%; height: 30px; background: rgba(0,0,0,0.3); border-radius: 15px; margin: 10px 0; overflow: hidden; position: relative; }
        .health-fill { height: 100%; background: linear-gradient(90deg, #ff6b6b 0%, #ee5a6f 100%); transition: width 0.3s; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .mana-bar { width: 100%; height: 20px; background: rgba(0,0,0,0.3); border-radius: 10px; margin: 10px 0; overflow: hidden; }
        .mana-fill { height: 100%; background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%); transition: width 0.3s; }
        .hand { display: flex; gap: 10px; flex-wrap: wrap; min-height: 150px; }
        .card { background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%); border-radius: 10px; padding: 15px; min-width: 120px; cursor: pointer; transition: all 0.3s; border: 3px solid transparent; text-align: center; color: #333; }
        .card:hover { transform: translateY(-10px); box-shadow: 0 10px 20px rgba(0,0,0,0.3); border-color: #00b894; }
        .card.disabled { opacity: 0.5; cursor: not-started; transform: none; }
        .card-name { font-weight: bold; margin-bottom: 5px; font-size: 16px; }
        .card-cost { color: #0984e3; font-weight: bold; margin-bottom: 5px; }
        .card-effect { font-size: 12px; color: #666; }
        .card-damage { font-size: 20px; color: #d63031; font-weight: bold; margin: 5px 0; }
        .enemy-hand { justify-content: center; }
        .enemy-card { background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%); color: white; }
        .battle-log { background: rgba(0,0,0,0.3); border-radius: 10px; padding: 15px; max-height: 200px; overflow-y: auto; margin-bottom: 20px; backdrop-filter: blur(10px); }
        .log-message { padding: 5px; margin: 3px 0; border-radius: 3px; }
        .log-message.player { background: rgba(0,184,148,0.3); }
        .log-message.enemy { background: rgba(214,48,49,0.3); }
        .log-message.info { background: rgba(9,132,227,0.3); }
        .controls { display: flex; gap: 10px; flex-wrap: wrap; }
        button { padding: 15px 30px; font-size: 16px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; background: linear-gradient(135deg, #00b894 0%, #00d9a5 100%); color: white; transition: all 0.3s; }
        button:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
        button:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .deck-panel { background: rgba(0,0,0,0.3); border-radius: 10px; padding: 20px; margin-bottom: 20px; backdrop-filter: blur(10px); }
        .deck-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; margin-top: 15px; }
        .messages { position: fixed; top: 20px; right: 20px; z-index: 1000; display: flex; flex-direction: column; gap: 10px; max-width: 300px; }
        .message { padding: 15px; border-radius: 8px; font-weight: bold; animation: slideIn 0.3s; box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .message.success { background: #00b894; }
        .message.error { background: #d63031; }
        .message.info { background: #0984e3; }
        @media (max-width: 768px) { .battle-area { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div id="messages" class="messages"></div>
    <div class="container">
        <h1>‚öîÔ∏è Card Battle Arena ‚öîÔ∏è</h1>
        <div class="game-stats">
            <div class="stat"><div class="stat-label">üí∞ Gold</div><div class="stat-value" id="gold">100</div></div>
            <div class="stat"><div class="stat-label">üèÜ Wins</div><div class="stat-value" id="wins">0</div></div>
            <div class="stat"><div class="stat-label">üìä Win Rate</div><div class="stat-value" id="winrate">0%</div></div>
        </div>
        <div class="battle-area">
            <div class="enemy-area">
                <h2>ü§ñ Enemy</h2>
                <div class="health-bar"><div class="health-fill" id="enemy-health" style="width: 100%">30/30</div></div>
                <div class="mana-bar"><div class="mana-fill" id="enemy-mana" style="width: 100%"></div></div>
                <p style="text-align: center; margin: 10px 0;">Mana: <span id="enemy-mana-text">3</span>/3</p>
                <div class="hand enemy-hand" id="enemy-hand"></div>
            </div>
            <div class="player-area">
                <h2>üë§ You</h2>
                <div class="health-bar"><div class="health-fill" id="player-health" style="width: 100%">30/30</div></div>
                <div class="mana-bar"><div class="mana-fill" id="player-mana" style="width: 100%"></div></div>
                <p style="text-align: center; margin: 10px 0;">Mana: <span id="player-mana-text">3</span>/3</p>
                <div class="hand" id="player-hand"></div>
            </div>
        </div>
        <div class="battle-log" id="battle-log"></div>
        <div class="controls">
            <button onclick="game.endTurn()">‚è≠Ô∏è End Turn</button>
            <button onclick="game.newBattle()">üîÑ New Battle</button>
            <button onclick="game.saveGame()">üíæ Save</button>
            <button onclick="game.loadGame()">üìÇ Load</button>
        </div>
        <div class="deck-panel">
            <h2>üìö Your Deck</h2>
            <div class="deck-grid" id="deck-display"></div>
        </div>
    </div>
    <script>
        const CARDS = {
            strike: { id: 'strike', name: 'Strike', cost: 1, damage: 6, effect: null, desc: 'Deal 6 damage' },
            defend: { id: 'defend', name: 'Defend', cost: 1, damage: 0, effect: 'shield', value: 5, desc: 'Gain 5 shield' },
            fireball: { id: 'fireball', name: 'Fireball', cost: 2, damage: 10, effect: null, desc: 'Deal 10 damage' },
            heal: { id: 'heal', name: 'Heal', cost: 2, damage: 0, effect: 'heal', value: 8, desc: 'Heal 8 HP' },
            lightning: { id: 'lightning', name: 'Lightning', cost: 3, damage: 15, effect: null, desc: 'Deal 15 damage' },
            powerUp: { id: 'powerUp', name: 'Power Up', cost: 2, damage: 0, effect: 'buff', value: 3, desc: '+3 damage next turn' },
            drainLife: { id: 'drainLife', name: 'Drain Life', cost: 3, damage: 8, effect: 'drain', desc: 'Deal 8, heal 8' }
        };
        
        const game = {
            playerHealth: 30, playerMaxHealth: 30, playerMana: 3, playerMaxMana: 3,
            enemyHealth: 30, enemyMaxHealth: 30, enemyMana: 3, enemyMaxMana: 3,
            playerHand: [], playerDeck: [], playerDiscard: [],
            enemyHand: [], enemyDeck: [], enemyDiscard: [],
            playerShield: 0, enemyShield: 0, playerBuff: 0,
            gold: 100, wins: 0, battles: 0, inBattle: false,
            
            init() {
                this.playerDeck = ['strike', 'strike', 'strike', 'defend', 'defend', 'fireball', 'heal', 'lightning', 'powerUp', 'drainLife'];
                this.renderDeck();
                this.newBattle();
                if (localStorage.getItem('cardGame')) this.showMessage('Saved game found!', 'info');
            },
            
            newBattle() {
                this.inBattle = true;
                this.battles++;
                this.playerHealth = this.playerMaxHealth;
                this.enemyHealth = this.enemyMaxHealth;
                this.playerMana = this.playerMaxMana;
                this.enemyMana = this.enemyMaxMana;
                this.playerShield = 0;
                this.enemyShield = 0;
                this.playerBuff = 0;
                this.playerHand = [];
                this.enemyHand = [];
                this.playerDiscard = [];
                this.enemyDiscard = [];
                
                this.shuffleDeck('player');
                this.shuffleDeck('enemy');
                this.drawCards('player', 5);
                this.drawCards('enemy', 5);
                
                document.getElementById('battle-log').innerHTML = '';
                this.addLog('Battle Start!', 'info');
                this.updateUI();
            },
            
            shuffleDeck(who) {
                const deck = who === 'player' ? [...this.playerDeck] : ['strike', 'strike', 'defend', 'defend', 'fireball', 'lightning', 'heal'];
                for (let i = deck.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [deck[i], deck[j]] = [deck[j], deck[i]];
                }
                if (who === 'player') this.playerDeck = deck; else this.enemyDeck = deck;
            },
            
            drawCards(who, count) {
                for (let i = 0; i < count; i++) {
                    if (who === 'player') {
                        if (this.playerDeck.length === 0) {
                            this.playerDeck = [...this.playerDiscard];
                            this.playerDiscard = [];
                            this.shuffleDeck('player');
                        }
                        if (this.playerDeck.length > 0) this.playerHand.push(this.playerDeck.pop());
                    } else {
                        if (this.enemyDeck.length === 0) {
                            this.enemyDeck = [...this.enemyDiscard];
                            this.enemyDiscard = [];
                            this.shuffleDeck('enemy');
                        }
                        if (this.enemyDeck.length > 0) this.enemyHand.push(this.enemyDeck.pop());
                    }
                }
            },
            
            playCard(cardId, index) {
                const card = CARDS[cardId];
                if (this.playerMana < card.cost) {
                    this.showMessage('Not enough mana!', 'error');
                    return;
                }
                
                this.playerMana -= card.cost;
                this.playerHand.splice(index, 1);
                this.playerDiscard.push(cardId);
                
                if (card.damage > 0) {
                    let dmg = card.damage + this.playerBuff;
                    if (card.effect === 'drain') {
                        this.playerHealth = Math.min(this.playerHealth + dmg, this.playerMaxHealth);
                        this.addLog(`You drain ${dmg} HP!`, 'player');
                    }
                    dmg = Math.max(0, dmg - this.enemyShield);
                    if (dmg > this.enemyShield) this.enemyShield = 0; else this.enemyShield -= dmg;
                    this.enemyHealth -= dmg;
                    this.addLog(`You deal ${dmg} damage!`, 'player');
                }
                
                if (card.effect === 'shield') {
                    this.playerShield += card.value;
                    this.addLog(`You gain ${card.value} shield!`, 'player');
                }
                if (card.effect === 'heal') {
                    this.playerHealth = Math.min(this.playerHealth + card.value, this.playerMaxHealth);
                    this.addLog(`You heal ${card.value} HP!`, 'player');
                }
                if (card.effect === 'buff') {
                    this.playerBuff += card.value;
                    this.addLog(`You gain +${card.value} damage!`, 'player');
                }
                
                this.updateUI();
                this.checkWin();
            },
            
            endTurn() {
                this.playerBuff = 0;
                this.playerMana = this.playerMaxMana;
                this.drawCards('player', 2);
                this.addLog('Turn ended.', 'info');
                
                setTimeout(() => this.enemyTurn(), 1000);
            },
            
            enemyTurn() {
                this.enemyMana = this.enemyMaxMana;
                this.drawCards('enemy', 2);
                this.addLog('Enemy turn...', 'info');
                
                let played = 0;
                while (this.enemyMana > 0 && this.enemyHand.length > 0 && played < 3) {
                    const affordable = this.enemyHand.filter(c => CARDS[c].cost <= this.enemyMana);
                    if (affordable.length === 0) break;
                    
                    const cardId = affordable[Math.floor(Math.random() * affordable.length)];
                    const card = CARDS[cardId];
                    const index = this.enemyHand.indexOf(cardId);
                    
                    this.enemyMana -= card.cost;
                    this.enemyHand.splice(index, 1);
                    this.enemyDiscard.push(cardId);
                    
                    if (card.damage > 0) {
                        let dmg = Math.max(0, card.damage - this.playerShield);
                        if (dmg > this.playerShield) this.playerShield = 0; else this.playerShield -= dmg;
                        this.playerHealth -= dmg;
                        this.addLog(`Enemy plays ${card.name}, deals ${dmg} damage!`, 'enemy');
                    }
                    if (card.effect === 'shield') {
                        this.enemyShield += card.value;
                        this.addLog(`Enemy gains ${card.value} shield!`, 'enemy');
                    }
                    if (card.effect === 'heal') {
                        this.enemyHealth = Math.min(this.enemyHealth + card.value, this.enemyMaxHealth);
                        this.addLog(`Enemy heals ${card.value} HP!`, 'enemy');
                    }
                    
                    played++;
                }
                
                this.updateUI();
                this.checkLose();
            },
            
            checkWin() {
                if (this.enemyHealth <= 0) {
                    this.addLog('Victory!', 'player');
                    this.wins++;
                    this.gold += 50;
                    this.inBattle = false;
                    this.showMessage('You won! +50 gold', 'success');
                    this.updateUI();
                }
            },
            
            checkLose() {
                if (this.playerHealth <= 0) {
                    this.addLog('Defeated!', 'enemy');
                    this.inBattle = false;
                    this.showMessage('You lost!', 'error');
                    this.updateUI();
                }
            },
            
            updateUI() {
                const playerHPPct = (this.playerHealth / this.playerMaxHealth) * 100;
                const enemyHPPct = (this.enemyHealth / this.enemyMaxHealth) * 100;
                const playerManaPct = (this.playerMana / this.playerMaxMana) * 100;
                const enemyManaPct = (this.enemyMana / this.enemyMaxMana) * 100;
                
                document.getElementById('player-health').style.width = playerHPPct + '%';
                document.getElementById('player-health').textContent = `${Math.max(0, this.playerHealth)}/${this.playerMaxHealth}` + (this.playerShield > 0 ? ` +${this.playerShield}üõ°Ô∏è` : '');
                document.getElementById('enemy-health').style.width = enemyHPPct + '%';
                document.getElementById('enemy-health').textContent = `${Math.max(0, this.enemyHealth)}/${this.enemyMaxHealth}` + (this.enemyShield > 0 ? ` +${this.enemyShield}üõ°Ô∏è` : '');
                
                document.getElementById('player-mana').style.width = playerManaPct + '%';
                document.getElementById('player-mana-text').textContent = `${this.playerMana}/${this.playerMaxMana}`;
                document.getElementById('enemy-mana').style.width = enemyManaPct + '%';
                document.getElementById('enemy-mana-text').textContent = `${this.enemyMana}/${this.enemyMaxMana}`;
                
                document.getElementById('gold').textContent = this.gold;
                document.getElementById('wins').textContent = this.wins;
                document.getElementById('winrate').textContent = this.battles > 0 ? Math.round((this.wins / this.battles) * 100) + '%' : '0%';
                
                this.renderHand('player');
                this.renderHand('enemy');
            },
            
            renderHand(who) {
                const container = document.getElementById(who + '-hand');
                const hand = who === 'player' ? this.playerHand : this.enemyHand;
                container.innerHTML = '';
                
                hand.forEach((cardId, index) => {
                    const card = CARDS[cardId];
                    const div = document.createElement('div');
                    div.className = 'card' + (who === 'enemy' ? ' enemy-card' : '');
                    
                    if (who === 'player') {
                        const canPlay = this.playerMana >= card.cost && this.inBattle;
                        if (!canPlay) div.classList.add('disabled');
                        
                        div.innerHTML = `
                            <div class="card-name">${card.name}</div>
                            <div class="card-cost">üíé ${card.cost}</div>
                            ${card.damage > 0 ? `<div class="card-damage">‚öîÔ∏è ${card.damage}</div>` : ''}
                            <div class="card-effect">${card.desc}</div>
                        `;
                        
                        if (canPlay) div.onclick = () => this.playCard(cardId, index);
                    } else {
                        div.innerHTML = `<div style="font-size: 48px;">üé¥</div><div style="font-size: 12px;">Enemy Card</div>`;
                    }
                    
                    container.appendChild(div);
                });
            },
            
            renderDeck() {
                const container = document.getElementById('deck-display');
                const counts = {};
                this.playerDeck.forEach(id => counts[id] = (counts[id] || 0) + 1);
                
                container.innerHTML = '';
                for (let id in counts) {
                    const card = CARDS[id];
                    const div = document.createElement('div');
                    div.className = 'card';
                    div.innerHTML = `
                        <div class="card-name">${card.name} √ó${counts[id]}</div>
                        <div class="card-cost">üíé ${card.cost}</div>
                        ${card.damage > 0 ? `<div class="card-damage">‚öîÔ∏è ${card.damage}</div>` : ''}
                        <div class="card-effect">${card.desc}</div>
                    `;
                    container.appendChild(div);
                }
            },
            
            addLog(text, type) {
                const log = document.getElementById('battle-log');
                const msg = document.createElement('div');
                msg.className = `log-message ${type}`;
                msg.textContent = text;
                log.appendChild(msg);
                log.scrollTop = log.scrollHeight;
            },
            
            showMessage(text, type) {
                const container = document.getElementById('messages');
                const msg = document.createElement('div');
                msg.className = `message ${type}`;
                msg.textContent = text;
                container.appendChild(msg);
                setTimeout(() => { msg.style.opacity = '0'; msg.style.transform = 'translateX(100%)'; setTimeout(() => msg.remove(), 300); }, 3000);
            },
            
            saveGame() {
                localStorage.setItem('cardGame', JSON.stringify({ gold: this.gold, wins: this.wins, battles: this.battles, deck: this.playerDeck }));
                this.showMessage('Game saved!', 'success');
            },
            
            loadGame() {
                const saved = localStorage.getItem('cardGame');
                if (!saved) { this.showMessage('No saved game!', 'error'); return; }
                const data = JSON.parse(saved);
                this.gold = data.gold;
                this.wins = data.wins;
                this.battles = data.battles;
                this.playerDeck = data.deck;
                this.renderDeck();
                this.updateUI();
                this.showMessage('Game loaded!', 'success');
            }
        };
        
        game.init();
    </script>
</body>
</html>